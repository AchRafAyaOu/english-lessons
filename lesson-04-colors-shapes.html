<div class="lesson-content">
  <div class="lesson-header">
    <h1 class="lesson-title">الدرس الرابع: الألوان والأشكال</h1>
    <p class="lesson-description">استكشف عالم الألوان والأشكال مع التطبيق العملي في جمل ومواقف حقيقية</p>
  </div>

  <div class="lesson-sections">
    <!-- قسم الألوان -->
    <div class="lesson-section">
      <h2 class="section-title">
        <i class="fas fa-palette"></i>
        الألوان الأساسية
      </h2>
      
      <div class="colors-grid">
        <div class="color-card" style="--color: #FF0000" onclick="playColorSound('red')">
          <div class="color-circle"></div>
          <div class="color-english">Red</div>
          <div class="color-pronunciation">/red/</div>
          <div class="color-arabic">أحمر</div>
          <div class="color-example">Red apple - تفاحة حمراء</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #00FF00" onclick="playColorSound('green')">
          <div class="color-circle"></div>
          <div class="color-english">Green</div>
          <div class="color-pronunciation">/ɡriːn/</div>
          <div class="color-arabic">أخضر</div>
          <div class="color-example">Green tree - شجرة خضراء</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #0000FF" onclick="playColorSound('blue')">
          <div class="color-circle"></div>
          <div class="color-english">Blue</div>
          <div class="color-pronunciation">/bluː/</div>
          <div class="color-arabic">أزرق</div>
          <div class="color-example">Blue sky - سماء زرقاء</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #FFFF00" onclick="playColorSound('yellow')">
          <div class="color-circle"></div>
          <div class="color-english">Yellow</div>
          <div class="color-pronunciation">/ˈjɛloʊ/</div>
          <div class="color-arabic">أصفر</div>
          <div class="color-example">Yellow sun - شمس صفراء</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #FFA500" onclick="playColorSound('orange')">
          <div class="color-circle"></div>
          <div class="color-english">Orange</div>
          <div class="color-pronunciation">/ˈɔrɪndʒ/</div>
          <div class="color-arabic">برتقالي</div>
          <div class="color-example">Orange fruit - فاكهة برتقالية</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #800080" onclick="playColorSound('purple')">
          <div class="color-circle"></div>
          <div class="color-english">Purple</div>
          <div class="color-pronunciation">/ˈpɝpəl/</div>
          <div class="color-arabic">بنفسجي</div>
          <div class="color-example">Purple flower - زهرة بنفسجية</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #FFC0CB" onclick="playColorSound('pink')">
          <div class="color-circle"></div>
          <div class="color-english">Pink</div>
          <div class="color-pronunciation">/pɪŋk/</div>
          <div class="color-arabic">وردي</div>
          <div class="color-example">Pink dress - فستان وردي</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #000000" onclick="playColorSound('black')">
          <div class="color-circle"></div>
          <div class="color-english">Black</div>
          <div class="color-pronunciation">/blæk/</div>
          <div class="color-arabic">أسود</div>
          <div class="color-example">Black cat - قطة سوداء</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="color-card" style="--color: #FFFFFF" onclick="playColorSound('white')">
          <div class="color-circle"></div>
          <div class="color-english">White</div>
          <div class="color-pronunciation">/waɪt/</div>
          <div class="color-arabic">أبيض</div>
          <div class="color-example">White snow - ثلج أبيض</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
      </div>
    </div>

    <!-- قسم الأشكال -->
    <div class="lesson-section">
      <h2 class="section-title">
        <i class="fas fa-shapes"></i>
        الأشكال الهندسية
      </h2>
      
      <div class="shapes-grid">
        <div class="shape-card" onclick="playShapeSound('circle')">
          <div class="shape-visual circle-shape"></div>
          <div class="shape-english">Circle</div>
          <div class="shape-pronunciation">/ˈsɝkəl/</div>
          <div class="shape-arabic">دائرة</div>
          <div class="shape-example">The ball is round - الكرة دائرية</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="shape-card" onclick="playShapeSound('square')">
          <div class="shape-visual square-shape"></div>
          <div class="shape-english">Square</div>
          <div class="shape-pronunciation">/skwɛr/</div>
          <div class="shape-arabic">مربع</div>
          <div class="shape-example">Square box - صندوق مربع</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="shape-card" onclick="playShapeSound('triangle')">
          <div class="shape-visual triangle-shape"></div>
          <div class="shape-english">Triangle</div>
          <div class="shape-pronunciation">/ˈtraɪæŋɡəl/</div>
          <div class="shape-arabic">مثلث</div>
          <div class="shape-example">Triangle roof - سقف مثلث</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="shape-card" onclick="playShapeSound('rectangle')">
          <div class="shape-visual rectangle-shape"></div>
          <div class="shape-english">Rectangle</div>
          <div class="shape-pronunciation">/ˈrɛktæŋɡəl/</div>
          <div class="shape-arabic">مستطيل</div>
          <div class="shape-example">Rectangle table - طاولة مستطيلة</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="shape-card" onclick="playShapeSound('oval')">
          <div class="shape-visual oval-shape"></div>
          <div class="shape-english">Oval</div>
          <div class="shape-pronunciation">/ˈoʊvəl/</div>
          <div class="shape-arabic">بيضاوي</div>
          <div class="shape-example">Oval mirror - مرآة بيضاوية</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
        
        <div class="shape-card" onclick="playShapeSound('star')">
          <div class="shape-visual star-shape"></div>
          <div class="shape-english">Star</div>
          <div class="shape-pronunciation">/stɑr/</div>
          <div class="shape-arabic">نجمة</div>
          <div class="shape-example">Bright star - نجمة مضيئة</div>
          <button class="audio-btn"><i class="fas fa-volume-up"></i></button>
        </div>
      </div>
    </div>

    <!-- قسم الوصف -->
    <div class="lesson-section">
      <h2 class="section-title">
        <i class="fas fa-eye"></i>
        وصف الأشياء بالألوان والأشكال
      </h2>
      
      <div class="description-examples">
        <div class="example-card">
          <div class="example-visual">
            <div class="visual-item" style="background: #FF0000; border-radius: 50%; width: 60px; height: 60px;"></div>
          </div>
          <div class="example-text">
            <div class="example-english">This is a red circle</div>
            <div class="example-pronunciation">/ðɪs ɪz ə red ˈsɝkəl/</div>
            <div class="example-arabic">هذه دائرة حمراء</div>
          </div>
        </div>
        
        <div class="example-card">
          <div class="example-visual">
            <div class="visual-item" style="background: #00FF00; width: 60px; height: 60px;"></div>
          </div>
          <div class="example-text">
            <div class="example-english">This is a green square</div>
            <div class="example-pronunciation">/ðɪs ɪz ə ɡriːn skwɛr/</div>
            <div class="example-arabic">هذا مربع أخضر</div>
          </div>
        </div>
        
        <div class="example-card">
          <div class="example-visual">
            <div class="visual-item triangle-blue"></div>
          </div>
          <div class="example-text">
            <div class="example-english">This is a blue triangle</div>
            <div class="example-pronunciation">/ðɪs ɪz ə bluː ˈtraɪæŋɡəl/</div>
            <div class="example-arabic">هذا مثلث أزرق</div>
          </div>
        </div>
        
        <div class="example-card">
          <div class="example-visual">
            <div class="visual-item" style="background: #FFFF00; width: 80px; height: 40px;"></div>
          </div>
          <div class="example-text">
            <div class="example-english">This is a yellow rectangle</div>
            <div class="example-pronunciation">/ðɪs ɪz ə ˈjɛloʊ ˈrɛktæŋɡəl/</div>
            <div class="example-arabic">هذا مستطيل أصفر</div>
          </div>
        </div>
      </div>
    </div>

    <!-- قسم اللعبة التفاعلية -->
    <div class="lesson-section">
      <h2 class="section-title">
        <i class="fas fa-gamepad"></i>
        لعبة الألوان والأشكال
      </h2>
      
      <div class="color-game">
        <div class="game-instructions">
          <h3>🎯 لعبة المطابقة السريعة</h3>
          <p>اضغط على الشكل الذي يطابق الوصف المطلوب</p>
          <div class="game-stats">
            <div class="stat-item">
              <span class="stat-label">النقاط:</span>
              <span class="stat-value" id="score">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">الوقت:</span>
              <span class="stat-value" id="timer">30</span>
            </div>
          </div>
        </div>
        
        <div class="game-question" id="game-question">
          اضغط على الدائرة الحمراء
        </div>
        
        <div class="game-shapes" id="game-shapes">
          <div class="game-shape" data-color="red" data-shape="circle" onclick="selectShape(this)">
            <div class="shape-visual circle-shape" style="background: #FF0000;"></div>
          </div>
          <div class="game-shape" data-color="blue" data-shape="square" onclick="selectShape(this)">
            <div class="shape-visual square-shape" style="background: #0000FF;"></div>
          </div>
          <div class="game-shape" data-color="green" data-shape="triangle" onclick="selectShape(this)">
            <div class="shape-visual triangle-shape" style="border-bottom-color: #00FF00;"></div>
          </div>
          <div class="game-shape" data-color="yellow" data-shape="rectangle" onclick="selectShape(this)">
            <div class="shape-visual rectangle-shape" style="background: #FFFF00;"></div>
          </div>
        </div>
        
        <div class="game-controls">
          <button class="game-btn" onclick="startGame()">بدء اللعبة</button>
          <button class="game-btn" onclick="resetGame()">إعادة تشغيل</button>
        </div>
      </div>
    </div>

    <!-- قسم التمارين -->
    <div class="lesson-section">
      <h2 class="section-title">
        <i class="fas fa-pencil-alt"></i>
        التمارين التفاعلية
      </h2>
      
      <div class="exercise-container">
        <div class="exercise-item">
          <h3>تمرين 1: اختر اللون الصحيح</h3>
          <div class="exercise-question">
            <div class="color-sample" style="background: #FF0000; width: 50px; height: 50px; border-radius: 50%; margin: 0 auto 1rem;"></div>
            <p>ما هو اسم هذا اللون؟</p>
            <div class="exercise-options">
              <button class="option-btn" onclick="checkAnswer(this, true)">Red</button>
              <button class="option-btn" onclick="checkAnswer(this, false)">Blue</button>
              <button class="option-btn" onclick="checkAnswer(this, false)">Green</button>
              <button class="option-btn" onclick="checkAnswer(this, false)">Yellow</button>
            </div>
          </div>
        </div>
        
        <div class="exercise-item">
          <h3>تمرين 2: اختر الشكل الصحيح</h3>
          <div class="exercise-question">
            <div class="shape-sample triangle-shape" style="margin: 0 auto 1rem;"></div>
            <p>ما هو اسم هذا الشكل؟</p>
            <div class="exercise-options">
              <button class="option-btn" onclick="checkAnswer(this, false)">Circle</button>
              <button class="option-btn" onclick="checkAnswer(this, false)">Square</button>
              <button class="option-btn" onclick="checkAnswer(this, true)">Triangle</button>
              <button class="option-btn" onclick="checkAnswer(this, false)">Rectangle</button>
            </div>
          </div>
        </div>
        
        <div class="exercise-item">
          <h3>تمرين 3: أكمل الجملة</h3>
          <div class="exercise-question">
            <p>The sky is _____</p>
            <div class="exercise-options">
              <button class="option-btn" onclick="checkAnswer(this, false)">red</button>
              <button class="option-btn" onclick="checkAnswer(this, true)">blue</button>
              <button class="option-btn" onclick="checkAnswer(this, false)">green</button>
              <button class="option-btn" onclick="checkAnswer(this, false)">yellow</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="lesson-navigation">
    <button class="nav-btn prev-btn" onclick="previousLesson()">
      <i class="fas fa-arrow-right"></i>
      الدرس السابق
    </button>
    
    <button class="nav-btn next-btn" onclick="nextLesson()">
      الدرس التالي
      <i class="fas fa-arrow-left"></i>
    </button>
  </div>
</div>

<style>
.lesson-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  background: var(--bg-primary);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-lg);
}

.lesson-header {
  text-align: center;
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 2px solid var(--border-color);
}

.lesson-title {
  font-size: 2.5rem;
  color: var(--primary-color);
  margin-bottom: 1rem;
  font-weight: 800;
}

.lesson-description {
  font-size: 1.2rem;
  color: var(--text-light);
  line-height: 1.6;
}

.lesson-section {
  margin-bottom: 3rem;
  padding: 2rem;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-light);
}

.section-title {
  font-size: 1.8rem;
  color: var(--text-color);
  margin-bottom: 2rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.colors-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.color-card {
  background: var(--bg-primary);
  border-radius: var(--border-radius);
  padding: 2rem;
  text-align: center;
  border: 2px solid var(--border-color);
  transition: var(--transition);
  cursor: pointer;
  position: relative;
}

.color-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary-color);
}

.color-circle {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--color);
  margin: 0 auto 1rem;
  border: 3px solid var(--border-color);
  box-shadow: var(--shadow);
}

.color-english {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: 0.5rem;
}

.color-pronunciation {
  font-size: 1rem;
  color: var(--text-muted);
  font-style: italic;
  margin-bottom: 1rem;
}

.color-arabic {
  font-size: 1.3rem;
  color: var(--text-color);
  font-weight: 600;
  margin-bottom: 1rem;
}

.color-example {
  font-size: 0.9rem;
  color: var(--text-light);
  line-height: 1.4;
}

.shapes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.shape-card {
  background: var(--bg-primary);
  border-radius: var(--border-radius);
  padding: 2rem;
  text-align: center;
  border: 2px solid var(--border-color);
  transition: var(--transition);
  cursor: pointer;
  position: relative;
}

.shape-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
  border-color: var(--secondary-color);
}

.shape-visual {
  width: 80px;
  height: 80px;
  margin: 0 auto 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.circle-shape {
  border-radius: 50%;
  background: var(--primary-color);
}

.square-shape {
  background: var(--secondary-color);
}

.triangle-shape {
  width: 0;
  height: 0;
  border-left: 40px solid transparent;
  border-right: 40px solid transparent;
  border-bottom: 70px solid var(--warning-color);
  background: none;
}

.rectangle-shape {
  width: 100px;
  height: 60px;
  background: var(--info-color);
}

.oval-shape {
  width: 100px;
  height: 60px;
  border-radius: 50%;
  background: var(--success-color);
}

.star-shape {
  position: relative;
  width: 0;
  height: 0;
  border-left: 40px solid transparent;
  border-right: 40px solid transparent;
  border-bottom: 30px solid var(--warning-color);
  transform: rotate(35deg);
  background: none;
}

.star-shape::before {
  content: '';
  position: absolute;
  left: -40px;
  top: -22px;
  width: 0;
  height: 0;
  border-left: 40px solid transparent;
  border-right: 40px solid transparent;
  border-bottom: 30px solid var(--warning-color);
  transform: rotate(-70deg);
}

.star-shape::after {
  content: '';
  position: absolute;
  left: -40px;
  top: 3px;
  width: 0;
  height: 0;
  border-left: 40px solid transparent;
  border-right: 40px solid transparent;
  border-bottom: 30px solid var(--warning-color);
  transform: rotate(70deg);
}

.shape-english {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--secondary-color);
  margin-bottom: 0.5rem;
}

.shape-pronunciation {
  font-size: 1rem;
  color: var(--text-muted);
  font-style: italic;
  margin-bottom: 1rem;
}

.shape-arabic {
  font-size: 1.3rem;
  color: var(--text-color);
  font-weight: 600;
  margin-bottom: 1rem;
}

.shape-example {
  font-size: 0.9rem;
  color: var(--text-light);
  line-height: 1.4;
}

.description-examples {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
}

.example-card {
  background: var(--bg-primary);
  border-radius: var(--border-radius);
  padding: 2rem;
  border: 2px solid var(--border-color);
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 1.5rem;
}

.example-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
  border-color: var(--success-color);
}

.example-visual {
  flex-shrink: 0;
}

.triangle-blue {
  width: 0;
  height: 0;
  border-left: 30px solid transparent;
  border-right: 30px solid transparent;
  border-bottom: 52px solid #0000FF;
}

.example-english {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--success-color);
  margin-bottom: 0.5rem;
}

.example-pronunciation {
  font-size: 0.9rem;
  color: var(--text-muted);
  font-style: italic;
  margin-bottom: 0.5rem;
}

.example-arabic {
  font-size: 1.1rem;
  color: var(--text-color);
  font-weight: 600;
}

.color-game {
  background: var(--bg-primary);
  border-radius: var(--border-radius);
  padding: 2rem;
  border: 2px solid var(--border-color);
  text-align: center;
}

.game-instructions h3 {
  color: var(--primary-color);
  margin-bottom: 1rem;
}

.game-instructions p {
  color: var(--text-light);
  margin-bottom: 1.5rem;
}

.game-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 2rem;
}

.stat-item {
  background: var(--bg-secondary);
  padding: 1rem;
  border-radius: var(--border-radius);
  border: 1px solid var(--border-light);
}

.stat-label {
  font-weight: 600;
  color: var(--text-color);
}

.stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-left: 0.5rem;
}

.game-question {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-color);
  margin-bottom: 2rem;
  padding: 1rem;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-light);
}

.game-shapes {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.game-shape {
  background: var(--bg-secondary);
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius);
  padding: 1.5rem;
  cursor: pointer;
  transition: var(--transition);
}

.game-shape:hover {
  transform: scale(1.05);
  border-color: var(--primary-color);
  box-shadow: var(--shadow);
}

.game-shape.correct {
  border-color: var(--success-color);
  background: rgba(46, 204, 113, 0.1);
  animation: bounce 0.6s ease;
}

.game-shape.incorrect {
  border-color: var(--danger-color);
  background: rgba(231, 76, 60, 0.1);
  animation: shake 0.6s ease;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.game-controls {
  display: flex;
  justify-content: center;
  gap: 1rem;
}

.game-btn {
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: var(--transition);
}

.game-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.audio-btn {
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  border: none;
  padding: 0.5rem;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  transition: var(--transition);
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow);
  position: absolute;
  top: 1rem;
  right: 1rem;
}

.audio-btn:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-lg);
}

.exercise-container {
  background: var(--bg-primary);
  border-radius: var(--border-radius);
  padding: 2rem;
  margin-top: 2rem;
}

.exercise-item {
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-light);
}

.exercise-item h3 {
  color: var(--primary-color);
  margin-bottom: 1rem;
  font-size: 1.3rem;
}

.exercise-question {
  text-align: center;
}

.exercise-question p {
  font-size: 1.1rem;
  margin-bottom: 1.5rem;
  color: var(--text-color);
}

.exercise-options {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  justify-content: center;
}

.option-btn {
  padding: 0.75rem 1.5rem;
  border: 2px solid var(--border-color);
  background: var(--bg-primary);
  color: var(--text-color);
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 1.1rem;
  font-weight: 600;
  transition: var(--transition);
  min-width: 120px;
}

.option-btn:hover {
  border-color: var(--primary-color);
  background: var(--primary-color);
  color: white;
}

.option-btn.correct {
  background: var(--success-color);
  border-color: var(--success-color);
  color: white;
}

.option-btn.incorrect {
  background: var(--danger-color);
  border-color: var(--danger-color);
  color: white;
}

.lesson-navigation {
  display: flex;
  justify-content: space-between;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 2px solid var(--border-color);
}

.nav-btn {
  padding: 1rem 2rem;
  border: none;
  border-radius: var(--border-radius);
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.prev-btn {
  background: linear-gradient(135deg, var(--text-muted), var(--text-light));
  color: white;
}

.next-btn {
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
}

.nav-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

@media (max-width: 768px) {
  .lesson-content {
    padding: 1rem;
  }
  
  .colors-grid,
  .shapes-grid {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }
  
  .description-examples {
    grid-template-columns: 1fr;
  }
  
  .example-card {
    flex-direction: column;
    text-align: center;
  }
  
  .game-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .exercise-options {
    flex-direction: column;
  }
  
  .lesson-navigation {
    flex-direction: column;
    gap: 1rem;
  }
}
</style>

<script>
let gameScore = 0;
let gameTimer = 30;
let gameInterval;
let currentQuestion = {};

const gameQuestions = [
  { color: 'red', shape: 'circle', arabic: 'الدائرة الحمراء' },
  { color: 'blue', shape: 'square', arabic: 'المربع الأزرق' },
  { color: 'green', shape: 'triangle', arabic: 'المثلث الأخضر' },
  { color: 'yellow', shape: 'rectangle', arabic: 'المستطيل الأصفر' }
];

function playColorSound(color) {
  console.log('Playing color sound:', color);
}

function playShapeSound(shape) {
  console.log('Playing shape sound:', shape);
}

function checkAnswer(button, isCorrect) {
  const buttons = button.parentElement.querySelectorAll('.option-btn');
  
  buttons.forEach(btn => {
    btn.disabled = true;
    if (btn === button) {
      btn.classList.add(isCorrect ? 'correct' : 'incorrect');
    } else if (btn.onclick.toString().includes('true')) {
      btn.classList.add('correct');
    }
  });
}

function startGame() {
  gameScore = 0;
  gameTimer = 30;
  updateGameStats();
  generateQuestion();
  
  gameInterval = setInterval(() => {
    gameTimer--;
    updateGameStats();
    
    if (gameTimer <= 0) {
      endGame();
    }
  }, 1000);
}

function generateQuestion() {
  currentQuestion = gameQuestions[Math.floor(Math.random() * gameQuestions.length)];
  document.getElementById('game-question').textContent = `اضغط على ${currentQuestion.arabic}`;
  
  // إعادة تعيين الأشكال
  const shapes = document.querySelectorAll('.game-shape');
  shapes.forEach(shape => {
    shape.classList.remove('correct', 'incorrect');
  });
}

function selectShape(element) {
  const isCorrect = element.dataset.color === currentQuestion.color && 
                   element.dataset.shape === currentQuestion.shape;
  
  if (isCorrect) {
    element.classList.add('correct');
    gameScore += 10;
    updateGameStats();
    
    setTimeout(() => {
      generateQuestion();
    }, 1000);
  } else {
    element.classList.add('incorrect');
    gameScore = Math.max(0, gameScore - 5);
    updateGameStats();
  }
}

function updateGameStats() {
  document.getElementById('score').textContent = gameScore;
  document.getElementById('timer').textContent = gameTimer;
}

function endGame() {
  clearInterval(gameInterval);
  alert(`انتهت اللعبة! نقاطك النهائية: ${gameScore}`);
}

function resetGame() {
  clearInterval(gameInterval);
  gameScore = 0;
  gameTimer = 30;
  updateGameStats();
  document.getElementById('game-question').textContent = 'اضغط على بدء اللعبة للبدء';
  
  const shapes = document.querySelectorAll('.game-shape');
  shapes.forEach(shape => {
    shape.classList.remove('correct', 'incorrect');
  });
}

function previousLesson() {
  if (window.parent && window.parent.previousLesson) {
    window.parent.previousLesson();
  }
}

function nextLesson() {
  if (window.parent && window.parent.nextLesson) {
    window.parent.nextLesson();
  }
}
</script>